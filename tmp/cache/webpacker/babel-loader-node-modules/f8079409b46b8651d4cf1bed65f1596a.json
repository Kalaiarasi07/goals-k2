{"ast":null,"code":"var _jsxFileName = \"/home/user/MP/goals2/app/javascript/components/Signup.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport { validate_email, validate_name, validate_password, validate_confirm_password } from './shared/form_validations'; // API call to signup and renders next page on successful signup\n\nexport default function Signup(props) {\n  var history = useHistory();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      emailExists = _useState2[0],\n      setEmailExists = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errors = _useState4[0],\n      setErrors = _useState4[1];\n\n  var _useState5 = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    confirm_password: \"\"\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      user = _useState6[0],\n      setUser = _useState6[1];\n\n  var handleChange = function handleChange(e) {\n    setUser(_objectSpread(_objectSpread({}, user), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var validations_passed = function validations_passed(err) {\n    return typeof err.name === \"undefined\" && typeof err.email === \"undefined\" && typeof err.password === \"undefined\" && typeof err.confirm_password === \"undefined\";\n  };\n\n  var handleSignupSubmit = function handleSignupSubmit(e) {\n    e.preventDefault();\n    alert(props.route.type);\n    var err = {}; //validations\n\n    err.name = validate_name(user.name);\n    err.email = validate_email(user.email);\n    err.password = validate_password(user.password);\n    err.confirm_password = validate_confirm_password(user.password, user.confirm_password);\n    setErrors(err);\n\n    if (validations_passed(err)) {\n      Axios.post('/api/signup', {\n        name: user.name,\n        email: user.email,\n        password: user.password\n      }).then(function (resp) {\n        window.location.assign('/');\n      })[\"catch\"](function (error) {\n        setEmailExists(error.response.data.error);\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, \"Signup Page\"), emailExists && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 23\n    }\n  }, \" \", emailExists), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      return handleSignupSubmit(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"name\",\n    type: \"text\",\n    name: \"name\",\n    value: user.name,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }), errors.name && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  }, \" \", errors.name), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"email\",\n    type: \"text\",\n    name: \"email\",\n    value: user.email,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }), errors.email && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 26\n    }\n  }, \" \", errors.email), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"password\",\n    type: \"password\",\n    name: \"password\",\n    value: user.password,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }), errors.password && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }\n  }, \" \", errors.password), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"confirm password\",\n    type: \"password\",\n    name: \"confirm_password\",\n    value: user.confirm_password,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }), errors.confirm_password && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 37\n    }\n  }, \" \", errors.confirm_password), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    placeholder: \"submit\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, \"Sign In\")));\n}","map":{"version":3,"names":["React","useState","useHistory","Axios","validate_email","validate_name","validate_password","validate_confirm_password","Signup","props","history","emailExists","setEmailExists","errors","setErrors","name","email","password","confirm_password","user","setUser","handleChange","e","target","value","validations_passed","err","handleSignupSubmit","preventDefault","alert","route","type","post","then","resp","window","location","assign","error","response","data","color"],"sources":["/home/user/MP/goals2/app/javascript/components/Signup.jsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { useHistory } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport { validate_email, validate_name, validate_password, validate_confirm_password } from './shared/form_validations';\n\n\n// API call to signup and renders next page on successful signup\nexport default function Signup(props) {\n  const history = useHistory();\n  const [emailExists, setEmailExists] = useState();\n  const [errors, setErrors] = useState({});\n  const [user, setUser] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    confirm_password: \"\"\n  });\n\n  const handleChange = (e) => {\n    setUser({\n      ...user,\n      [e.target.name]: e.target.value,\n    })\n  }\n\n  const validations_passed = (err) => {\n    return (\n      typeof err.name === \"undefined\" &&\n      typeof err.email === \"undefined\" &&\n      typeof err.password === \"undefined\" &&\n      typeof err.confirm_password === \"undefined\" \n    )\n  }\n  const handleSignupSubmit = (e) => {\n    e.preventDefault();\n    alert(props.route.type)\n    let err = {}\n\n    //validations\n    err.name = validate_name(user.name)\n    err.email = validate_email(user.email)\n    err.password = validate_password(user.password)\n    err.confirm_password = validate_confirm_password(user.password, user.confirm_password)\n    setErrors(err)\n\n    if (validations_passed(err)) {\n      Axios.post('/api/signup', {\n        name: user.name,\n        email: user.email,\n        password: user.password\n      })\n        .then(resp => {\n          window.location.assign('/')\n        })\n        .catch(error => {\n          setEmailExists(error.response.data.error)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h1>Signup Page</h1>\n      {emailExists && <span style={{ color: 'red' }}> {emailExists}</span>}\n      <br />\n      <form onSubmit={e => handleSignupSubmit(e)}>\n        <input\n          placeholder=\"name\"\n          type=\"text\"\n          name=\"name\"\n          value={user.name}\n          onChange={handleChange}\n        />\n        {errors.name && <span style={{ color: 'red' }}> {errors.name}</span>}\n        <br /><br />\n        <input\n          placeholder=\"email\"\n          type=\"text\"\n          name=\"email\"\n          value={user.email}\n          onChange={handleChange}\n        />\n        {errors.email && <span style={{ color: 'red' }}> {errors.email}</span>}\n        <br /><br />\n        <input\n          placeholder=\"password\"\n          type=\"password\"\n          name=\"password\"\n          value={user.password}\n          onChange={handleChange}\n        />\n        {errors.password && <span style={{ color: 'red' }}> {errors.password}</span>}\n        <br /><br />\n        <input\n          placeholder=\"confirm password\"\n          type=\"password\"\n          name=\"confirm_password\"\n          value={user.confirm_password}\n          onChange={handleChange}\n        />\n        {errors.confirm_password && <span style={{ color: 'red' }}> {errors.confirm_password}</span>}\n        <br /><br />\n\n        <button placeholder=\"submit\" type=\"submit\">Sign In</button>\n      </form>\n    </div>\n  )\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}