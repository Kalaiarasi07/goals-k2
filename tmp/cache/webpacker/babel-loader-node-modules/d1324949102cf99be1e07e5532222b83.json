{"ast":null,"code":"var _jsxFileName = \"/home/user/MP/goals2/app/javascript/components/Login.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport { validate_email, validate_password } from './shared/form_validations'; // API call to login and renders next page on successful login\n\nexport default function Login() {\n  var history = useHistory();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      invalidCred = _useState2[0],\n      setInvalidCred = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errors = _useState4[0],\n      setErrors = _useState4[1];\n\n  var _useState5 = useState({\n    email: \"\",\n    password: \"\"\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      user = _useState6[0],\n      setUser = _useState6[1];\n\n  var handleChange = function handleChange(e) {\n    setUser(_objectSpread(_objectSpread({}, user), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var validations_passed = function validations_passed(err) {\n    return typeof err.email === \"undefined\" && typeof err.password === \"undefined\";\n  };\n\n  var handleLoginSubmit = function handleLoginSubmit(e) {\n    e.preventDefault(); //validations\n\n    var err = {};\n    err.email = validate_email(user.email);\n    err.password = validate_password(user.password);\n    setErrors(err);\n\n    if (validations_passed(err)) {\n      Axios.post('/api/login', {\n        email: user.email,\n        password: user.password\n      }).then(function (resp) {\n        console.log(\"response: \" + resp);\n        window.location.assign('/');\n      })[\"catch\"](function (error) {\n        setInvalidCred(error.response.data.error);\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, \"Login\"), invalidCred && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 23\n    }\n  }, \" \", invalidCred), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      handleLoginSubmit(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"email\",\n    type: \"text\",\n    name: \"email\",\n    value: user.email,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }), errors.email && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 26\n    }\n  }, \" \", errors.email), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"password\",\n    type: \"password\",\n    name: \"password\",\n    value: user.password,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }), errors.password && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 29\n    }\n  }, \" \", errors.password), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    placeholder: \"submit\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"Log In\")));\n}","map":{"version":3,"names":["React","useState","useHistory","Axios","validate_email","validate_password","Login","history","invalidCred","setInvalidCred","errors","setErrors","email","password","user","setUser","handleChange","e","target","name","value","validations_passed","err","handleLoginSubmit","preventDefault","post","then","resp","console","log","window","location","assign","error","response","data","color"],"sources":["/home/user/MP/goals2/app/javascript/components/Login.jsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { useHistory } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport { validate_email, validate_password } from './shared/form_validations';\n\n// API call to login and renders next page on successful login\nexport default function Login() {\n  const history = useHistory();\n  const [invalidCred, setInvalidCred] = useState([]);\n  const [errors, setErrors] = useState([]);\n  const [user, setUser] = useState({\n    email: \"\",\n    password: \"\",\n  })\n\n  const handleChange = (e) => {\n    setUser({\n      ...user,\n      [e.target.name]: e.target.value,\n    })\n  }\n\n  const validations_passed = (err) => {\n    return (\n      typeof err.email === \"undefined\" &&\n      typeof err.password === \"undefined\"\n    )\n  }\n  const handleLoginSubmit = (e) => {\n    e.preventDefault();\n\n    //validations\n    let err = {}\n    err.email = validate_email(user.email)\n    err.password = validate_password(user.password)\n\n    setErrors(err)\n\n    if (validations_passed(err)) {\n      Axios.post('/api/login', {\n        email: user.email,\n        password: user.password\n      })\n        .then(resp => {\n          console.log(\"response: \" + resp)\n          window.location.assign('/')\n        })\n        .catch(error => {\n          setInvalidCred(error.response.data.error)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h1>Login</h1>\n      {invalidCred && <span style={{ color: 'red' }}> {invalidCred}</span>}\n      <br />\n      <form onSubmit={e => { handleLoginSubmit(e) }}>\n        <input\n          placeholder=\"email\"\n          type=\"text\"\n          name=\"email\"\n          value={user.email}\n          onChange={handleChange}\n        />\n        {errors.email && <span style={{ color: 'red' }}> {errors.email}</span>}\n        <br /><br />\n        <input\n          placeholder=\"password\"\n          type=\"password\"\n          name=\"password\"\n          value={user.password}\n          onChange={handleChange}\n        />\n        {errors.password && <span style={{ color: 'red' }}> {errors.password}</span>}\n        <br /><br />\n        <button placeholder=\"submit\" type=\"submit\">Log In</button>\n      </form>\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}