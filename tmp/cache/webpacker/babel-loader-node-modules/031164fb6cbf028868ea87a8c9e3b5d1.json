{"ast":null,"code":"var _jsxFileName = \"/home/user/MP/rrapp2/app/javascript/components/Signup.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport { validate_email, validate_name, validate_password, validate_confirm_password } from './shared/form_validations'; // API call to signup and renders next page on successful signup\n\nexport default function Signup() {\n  var history = useHistory();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      emailExists = _useState2[0],\n      setEmailExists = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errors = _useState4[0],\n      setErrors = _useState4[1];\n\n  var _useState5 = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    confirm_password: \"\"\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      user = _useState6[0],\n      setUser = _useState6[1];\n\n  var handleChange = function handleChange(e) {\n    setUser(_objectSpread(_objectSpread({}, user), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var validations_passed = function validations_passed(err) {\n    return typeof err.name === \"undefined\" && typeof err.email === \"undefined\" && typeof err.password === \"undefined\" && typeof err.confirm_password === \"undefined\";\n  };\n\n  var handleSignupSubmit = function handleSignupSubmit(e) {\n    e.preventDefault();\n    var err = {}; //validations\n\n    err.name = validate_name(user.name);\n    err.email = validate_email(user.email);\n    err.password = validate_password(user.password);\n    err.confirm_password = validate_confirm_password(user.password, user.confirm_password);\n    setErrors(err);\n\n    if (validations_passed(err)) {\n      Axios.post('/api/signup', {\n        name: user.name,\n        email: user.email,\n        password: user.password\n      }).then(function (resp) {\n        history.push('/');\n        history.go(0);\n      })[\"catch\"](function (error) {\n        setEmailExists(error.response.data.error);\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, \"Signup Page\"));\n}","map":{"version":3,"names":["React","useState","useHistory","Axios","validate_email","validate_name","validate_password","validate_confirm_password","Signup","history","emailExists","setEmailExists","errors","setErrors","name","email","password","confirm_password","user","setUser","handleChange","e","target","value","validations_passed","err","handleSignupSubmit","preventDefault","post","then","resp","push","go","error","response","data"],"sources":["/home/user/MP/rrapp2/app/javascript/components/Signup.jsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { useHistory } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport { validate_email, validate_name, validate_password, validate_confirm_password } from './shared/form_validations';\n\n\n// API call to signup and renders next page on successful signup\nexport default function Signup() {\n  const history = useHistory();\n  const [emailExists, setEmailExists] = useState();\n  const [errors, setErrors] = useState({});\n  const [user, setUser] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    confirm_password: \"\"\n  });\n\n  const handleChange = (e) => {\n    setUser({\n      ...user,\n      [e.target.name]: e.target.value,\n    })\n  }\n\n  const validations_passed = (err) => {\n    return (\n      typeof err.name === \"undefined\" &&\n      typeof err.email === \"undefined\" &&\n      typeof err.password === \"undefined\" &&\n      typeof err.confirm_password === \"undefined\" \n    )\n  }\n  const handleSignupSubmit = (e) => {\n    e.preventDefault();\n    let err = {}\n\n    //validations\n    err.name = validate_name(user.name)\n    err.email = validate_email(user.email)\n    err.password = validate_password(user.password)\n    err.confirm_password = validate_confirm_password(user.password, user.confirm_password)\n    setErrors(err)\n\n    if (validations_passed(err)) {\n      Axios.post('/api/signup', {\n        name: user.name,\n        email: user.email,\n        password: user.password\n      })\n        .then(resp => {\n          history.push('/')\n          history.go(0)\n        })\n        .catch(error => {\n          setEmailExists(error.response.data.error)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h1>Signup Page</h1>\n      \n    </div>\n  )\n}\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,EAAyBC,aAAzB,EAAwCC,iBAAxC,EAA2DC,yBAA3D,QAA4F,2BAA5F,C,CAGA;;AACA,eAAe,SAASC,MAAT,GAAkB;EAC/B,IAAMC,OAAO,GAAGP,UAAU,EAA1B;;EACA,gBAAsCD,QAAQ,EAA9C;EAAA;EAAA,IAAOS,WAAP;EAAA,IAAoBC,cAApB;;EACA,iBAA4BV,QAAQ,CAAC,EAAD,CAApC;EAAA;EAAA,IAAOW,MAAP;EAAA,IAAeC,SAAf;;EACA,iBAAwBZ,QAAQ,CAAC;IAC/Ba,IAAI,EAAE,EADyB;IAE/BC,KAAK,EAAE,EAFwB;IAG/BC,QAAQ,EAAE,EAHqB;IAI/BC,gBAAgB,EAAE;EAJa,CAAD,CAAhC;EAAA;EAAA,IAAOC,IAAP;EAAA,IAAaC,OAAb;;EAOA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAAO;IAC1BF,OAAO,iCACFD,IADE,2BAEJG,CAAC,CAACC,MAAF,CAASR,IAFL,EAEYO,CAAC,CAACC,MAAF,CAASC,KAFrB,GAAP;EAID,CALD;;EAOA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,GAAD,EAAS;IAClC,OACE,OAAOA,GAAG,CAACX,IAAX,KAAoB,WAApB,IACA,OAAOW,GAAG,CAACV,KAAX,KAAqB,WADrB,IAEA,OAAOU,GAAG,CAACT,QAAX,KAAwB,WAFxB,IAGA,OAAOS,GAAG,CAACR,gBAAX,KAAgC,WAJlC;EAMD,CAPD;;EAQA,IAAMS,kBAAkB,GAAG,SAArBA,kBAAqB,CAACL,CAAD,EAAO;IAChCA,CAAC,CAACM,cAAF;IACA,IAAIF,GAAG,GAAG,EAAV,CAFgC,CAIhC;;IACAA,GAAG,CAACX,IAAJ,GAAWT,aAAa,CAACa,IAAI,CAACJ,IAAN,CAAxB;IACAW,GAAG,CAACV,KAAJ,GAAYX,cAAc,CAACc,IAAI,CAACH,KAAN,CAA1B;IACAU,GAAG,CAACT,QAAJ,GAAeV,iBAAiB,CAACY,IAAI,CAACF,QAAN,CAAhC;IACAS,GAAG,CAACR,gBAAJ,GAAuBV,yBAAyB,CAACW,IAAI,CAACF,QAAN,EAAgBE,IAAI,CAACD,gBAArB,CAAhD;IACAJ,SAAS,CAACY,GAAD,CAAT;;IAEA,IAAID,kBAAkB,CAACC,GAAD,CAAtB,EAA6B;MAC3BtB,KAAK,CAACyB,IAAN,CAAW,aAAX,EAA0B;QACxBd,IAAI,EAAEI,IAAI,CAACJ,IADa;QAExBC,KAAK,EAAEG,IAAI,CAACH,KAFY;QAGxBC,QAAQ,EAAEE,IAAI,CAACF;MAHS,CAA1B,EAKGa,IALH,CAKQ,UAAAC,IAAI,EAAI;QACZrB,OAAO,CAACsB,IAAR,CAAa,GAAb;QACAtB,OAAO,CAACuB,EAAR,CAAW,CAAX;MACD,CARH,WASS,UAAAC,KAAK,EAAI;QACdtB,cAAc,CAACsB,KAAK,CAACC,QAAN,CAAeC,IAAf,CAAoBF,KAArB,CAAd;MACD,CAXH;IAYD;EACF,CAzBD;;EA2BA,oBACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,iBADF,CADF;AAMD"},"metadata":{},"sourceType":"module"}